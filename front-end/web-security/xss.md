# XSS

## 简介

跨站点脚本攻击：通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。使攻击者可以绕过访问控制并模拟用户。
XSS攻击可以劫持Cookie、窃取用户信息、模拟用户身份执行操作等

* 反射型：主要做法是将脚本代码加入URL地址的请求参数里，请求参数进入程序后在页面直接输出。用户点击类似的恶意链接就可能受到攻击
* 存储型：注入的脚本永久存储在目标服务器上。然后，当浏览器发送数据请求时，受害者从服务器收到该恶意脚本并触发
* DOM Based XSS：从效果上来说也是反射型XSS，只因成因比较特别，所以发现它的安全专家专门提出这种类型的XSS。通过修改页面的DOM节点形成的XSS

## 防御

XSS的本质还是一种“HTML注入”，用户的数据被当成了HTML代码一部分来执行，从而混淆了原本的语义，产生了新的语义。

* HttpOnly: 阻止通过JS读取cookie
* 输入检查：过滤特殊字符。没有结合输出语境，不够智能且可能漏掉一些情况
* 输出检查：使用编码或转义。尽可能禁止用户可控制的变量在`<style>`、`style`属性及css文件中输出